# –ë—ç–∫–µ–Ω–¥ —Å–∞–π—Ç–∞ "–£—Ä–∞–ª–¢–µ—Ö–î–µ—Ç–∞–ª—å" ‚öôÔ∏è

–°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞—è–≤–æ–∫ —Å —Å–∞–π—Ç–∞ "–£—Ä–∞–ª–¢–µ—Ö–î–µ—Ç–∞–ª—å": –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –æ–±—Ä–∞—Ç–Ω—ã–π –∑–≤–æ–Ω–æ–∫,
–∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã —Å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º –∑–∞–¥–∞–Ω–∏–µ–º –∏ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ —É–≤–µ–¥–æ–º–ª—è–µ—Ç –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ –ø–æ e-mail.

## ‚ú® –ö–ª—é—á–µ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ–±—Ä–∞—â–µ–Ω–∏–µ –Ω–∞ –æ–±—Ä–∞—Ç–Ω—ã–π –∑–≤–æ–Ω–æ–∫ (`POST /api/calls`) —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π.
- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—É—é –∑–∞—è–≤–∫—É (`POST /api/requests`) —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º –∏ —Ñ–∞–π–ª–∞–º–∏.
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º —á–µ—Ä–µ–∑ SMTP —Å –ø–æ–º–æ—â—å—é Nodemailer.

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **–Ø–∑—ã–∫, —Å—Ä–µ–¥–∞ –∏ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫:** TypeScript, Node.js, Express.
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ú–æ–¥—É–ª—å–Ω—ã–µ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Vitest –∏ Supertest.
- **–ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞:** ESLint, Prettier, TypeScript —Å–æ —Å—Ç—Ä–æ–≥–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–æ–≤.
- **–†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏ –∏ –ø–æ—á—Ç–æ–π:** Multer –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤, Nodemailer –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–∏—Å–µ–º –ø–æ SMTP.

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Node.js –≤–µ—Ä—Å–∏–∏ 22.
2. –°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞:

   ```bash
   git clone https://github.com/IrinaRyazanskaya/utd-backend.git
   cd utd-backend
   ```

3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

   ```bash
   npm install
   ```

4. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –ø–æ –ø—Ä–∏–º–µ—Ä—É –∏–∑ `.env.example`:

   ```text
   SERVER_PORT=3000
   API_TOKEN=token-from-frontend
   MAIL_HOST=smtp.yandex.ru
   MAIL_PORT=465
   MAIL_USERNAME=user@example.com
   MAIL_PASSWORD=super-secret-password
   MAIL_SENDER="–£—Ä–∞–ª–¢–µ—Ö–î–µ—Ç–∞–ª—å –ë–æ—Ç <notify@example.com>"
   MAIL_RECIPIENTS=manager@example.com
   ```

5. –°–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ production-—Å–±–æ—Ä–∫—É:

   ```bash
   npm run build
   npm run start
   ```

–°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É `http://localhost:3000` –∏ –Ω–∞ –Ω–µ–≥–æ –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã.

6. –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –¥–æ—Å—Ç—É–ø–Ω—ã –∫–æ–º–∞–Ω–¥—ã:

   ```bash
   npm run build-check   # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Ç–∏–ø–æ–≤
   npm run format        # –ê–≤—Ç–æ—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é Prettier
   npm run format-check  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å –ø–æ–º–æ—â—å—é Prettier
   npm run lint          # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ –ª–∏–Ω—Ç–µ—Ä–æ–º ESLint
   npm run lint-fix      # –ê–≤—Ç–æ–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–º–µ—á–∞–Ω–∏–π ESLint
   npm run test          # –†–∞–∑–æ–≤—ã–π –∑–∞–ø—É—Å–∫ –º–æ–¥—É–ª—å–Ω—ã—Ö –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
   npm run test-watch    # –ó–∞–ø—É—Å–∫ –º–æ–¥—É–ª—å–Ω—ã—Ö –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ –≤ watch —Ä–µ–∂–∏–º–µ
   npm run test-coverage # –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –ø–æ–∫—Ä—ã—Ç–∏—è –º–æ–¥—É–ª—å–Ω—ã–º–∏ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–º–∏ —Ç–µ—Å—Ç–∞–º–∏
   ```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```text
utd-backend/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ main.ts             # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ –ø–æ—á—Ç—ã –∏ –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ application.ts      # –ö–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–æ—É—Ç–µ—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ config.ts           # –ß—Ç–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ handlers/           # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤ (ping, calls, requests)
‚îÇ   ‚îú‚îÄ‚îÄ middlewares/        # –†–∞–∑–ª–∏—á–Ω—ã–µ middleware (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏)
‚îÇ   ‚îî‚îÄ‚îÄ utils/              # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–∞–º–∏)
‚îú‚îÄ‚îÄ tests/                  # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å Supertest
‚îú‚îÄ‚îÄ package.json            # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ NPM-—Å–∫—Ä–∏–ø—Ç—ã
‚îú‚îÄ‚îÄ tsconfig.json           # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ TypeScript
‚îú‚îÄ‚îÄ eslint.config.mjs       # –ü—Ä–∞–≤–∏–ª–∞ –ª–∏–Ω—Ç–∏–Ω–≥–∞ JS/TS
‚îú‚îÄ‚îÄ .editorconfig           # –ï–¥–∏–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∫–æ–¥–∞
‚îú‚îÄ‚îÄ .gitignore              # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã–µ Git-–æ–º —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ .prettierignore         # –ò—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è Prettier
‚îî‚îÄ‚îÄ .prettierrc.json        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Prettier
```

## üê≥ –°–±–æ—Ä–∫–∞ –∏ –¥–µ–ø–ª–æ–π

–í —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω—ã–π `Dockerfile`. –ù–∞ —Å—Ç–∞–¥–∏–∏ `builder` –ø—Ä–æ–µ–∫—Ç —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑
`npm ci` –∏ `npm run build`, –ø–æ—Å–ª–µ —á–µ–≥–æ –Ω–∞ —Å—Ç–∞–¥–∏–∏ `runtime` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–±—Ä–∞–∑ `node:22-slim` —Å
—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ —Ç–æ–ª—å–∫–æ –ø—Ä–æ–¥–∞–∫—à–Ω-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏. –ì–æ—Ç–æ–≤—ã–π –æ–±—Ä–∞–∑ –∑–∞–ø—É—Å–∫–∞–µ—Ç `node dist/main.js`. –ü–µ—Ä–µ–¥
—Å—Ç–∞—Ä—Ç–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–µ—Ä–µ–¥–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è, –Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ —Ñ–ª–∞–≥ `--env-file .env`.

**–†—É—á–Ω–∞—è —Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞:**

```bash
docker build -t cr.yandex/crp4javlgtod0hm1kcho/utd-backend:<tag> .
```

–≥–¥–µ `<tag>` ‚Äì –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≤–µ—Ä—Å–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `1.0.0`).

**–ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:**

```bash
docker run --rm -p 3000:3000 --env-file .env cr.yandex/crp4javlgtod0hm1kcho/utd-backend:<tag>
```

**–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Taskfile:**

–í `taskfile.yaml` –æ–ø–∏—Å–∞–Ω—ã —Å–æ–∫—Ä–∞—â—ë–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Docker-–æ–±—Ä–∞–∑–æ–º. –î–ª—è –∏—Ö –∑–∞–ø—É—Å–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º
—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π CLI [`go-task`](https://taskfile.dev).

–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:

- `task docker-build` ‚Äì —Å–æ–±–∏—Ä–∞–µ—Ç –æ–±—Ä–∞–∑ –∏ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç —Ç—ç–≥ —Ç–µ–∫—É—â–µ–≥–æ –∫–æ—Ä–æ—Ç–∫–æ–≥–æ —Ö—ç—à–∞ –∫–æ–º–º–∏—Ç–∞
  (`git rev-parse --short HEAD`)
- `task docker-upload` ‚Äì –ø—É–±–ª–∏–∫—É–µ—Ç –æ–±—Ä–∞–∑ –≤ —Ä–µ–µ—Å—Ç—Ä `cr.yandex/crp4javlgtod0hm1kcho/utd-backend` —Å
  —Ç–∞–∫–∏–º –∂–µ —Ç—ç–≥–æ–º

## üí° –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ/–∏–∑—É—á–µ–Ω–æ

- –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –∑–∞—â–∏—â—ë–Ω–Ω–æ–µ API —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Ç–æ–∫–µ–Ω–∞.
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º –∏ —Ñ–∞–π–ª–æ–≤ –Ω–∞ Express —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Multer.
- –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ —Å–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–µ–π —á–µ—Ä–µ–∑ Taskfile.
- –û—Å–≤–æ–µ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Nodemailer —Å–æ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–º SMTP —Å–µ—Ä–≤–µ—Ä–æ–º –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–∏—Å–µ–º.
- –ù–∞–ø–∏—Å–∞–Ω—ã –∞–≤—Ç–æ-—Ç–µ—Å—Ç—ã –Ω–∞ Vitest —Å Supertest, –≤–∫–ª—é—á–∞—è —Å—Ü–µ–Ω–∞—Ä–∏–∏ —Å —Ñ–∞–π–ª–∞–º–∏ –∏ —ç–º—É–ª—è—Ü–∏–µ–π –æ—à–∏–±–æ–∫ –ø–æ—á—Ç—ã.

## üìö –†–µ—à—ë–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —á–µ–ª–ª–µ–Ω–¥–∂–∏

- **–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π —Å –ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏.
- **–ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞:** –ü—Ä–æ—Å—Ç–∞—è middleware –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–æ–∫–µ–Ω–∞, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å
  —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º –±–µ–∑ —Å–ª–æ–∂–Ω—ã—Ö –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤.
- **–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–∏—Å–µ–º:** –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ, –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –¥–ª—è
  –∫–ª–∏–µ–Ω—Ç–∞, –∑–∞—â–∏—Ç–∞ –æ—Ç –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö.
- **–†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏:** –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º —Å —Ñ–∞–π–ª–∞–º–∏, –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –≤ –±—É—Ñ–µ—Ä –∏
  –¥–∞–ª—å–Ω–µ–π—à–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –µ–≥–æ —á–µ—Ä–µ–∑ –ø–æ—á—Ç—É.
